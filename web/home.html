<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Previ</title>
    <link rel="stylesheet" href="global.css" />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body
    x-data="{
    current: '',
    loaded: false,
    interval: null,
    tellWidget(name) {
      this.$refs.widget.contentWindow.postMessage(name);
    },
    sectionInView(name) {
      if (this.interval) clearInterval(this.interval);

      this.current = name;

      if (this.loaded) {
        this.tellWidget(name);
        return;
      }

      this.interval = setInterval(() => {
        if (this.loaded) {
          this.tellWidget(name);
          clearInterval(this.interval);
        }
      }, 50);
    },
    getSectionClass(name) {
      return this.current === name ? 'active' : '';
    }
  }"
  >
    <main>
      <h1>Previ</h1>
      <section
        x-intersect.half="sectionInView('phone')"
        :class="getSectionClass('phone')"
      >
        <h2>Phone</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
      </section>

      <section
        x-intersect.half="sectionInView('auto')"
        :class="getSectionClass('auto')"
      >
        <h2>Auto Insurance</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
      </section>

      <section
        x-intersect.half="sectionInView('internet')"
        :class="getSectionClass('internet')"
      >
        <h2>Internet</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
      </section>

      <section
        x-intersect.half="sectionInView('home')"
        :class="getSectionClass('home')"
      >
        <h2>Home Insurance</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis
          libero officiis voluptate excepturi corrupti debitis quam rem nostrum
          beatae! Vitae earum hic, nostrum esse deleniti autem quos accusantium
          cupiditate eveniet!
        </p>
      </section>
    </main>
    <aside x-cloak x-show="loaded" x-transition>
      <iframe
        x-ref="widget"
        src="http://localhost:8001"
        frameborder="0"
        @message.window="loaded = true"
      ></iframe>
    </aside>

    <!-- Alpine Intersect Plugin -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"
    ></script>
    <!-- Alpine Core -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </body>
</html>
